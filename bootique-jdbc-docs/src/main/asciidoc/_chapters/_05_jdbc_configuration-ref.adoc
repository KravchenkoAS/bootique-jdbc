// Licensed to ObjectStyle LLC under one
// or more contributor license agreements.  See the NOTICE file
// distributed with this work for additional information
// regarding copyright ownership.  The ObjectStyle LLC licenses
// this file to you under the Apache License, Version 2.0 (the
// "License"); you may not use this file except in compliance
// with the License.  You may obtain a copy of the License at
//
//   http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.

[#jdbc-configuration-ref]
== Configuration Reference

`jdbc` is the root element of JDBC configuration. It is a map of named data source configurations:

```yaml
jdbc:
  ds1: ...
  ds2: ...
```
DataSource properties depend on whether you are using Tomcat or Hikari (or your own) connection pool and are documented
below.

=== Tomcat JDBC

TODO

=== HikariCP

HikariCP DataSource is produced via `io.bootique.jdbc.hikaricp.HikariCPManagedDataSourceFactory` and supports the
following properties (mostly matching https://github.com/brettwooldridge/HikariCP[HikariCP docs]):

HikariCP DataSource Property Reference - Essential Properties
[cols=3*,options=header]
|===
|Property
|Default
|Description

|`type`
|`hikari`
|Indicates that the DataSource is produced by HikariCP. Can be either `hikari` or `hikari-instrumented`. Can be omitted
if `bootique-jdbc-hikaricp` is the only implementation in the app dependencies.

|`autoCommit`
|`true`
| Controls the default auto-commit behavior of connections returned from the pool.

|`connectionTestQuery`
|
|

|`connectionTimeout`
|
|

|`idleTimeout`
|
|

|`jdbcUrl`
|
|

|`maximumPoolSize`
|
|

|`minimumIdle`
|
|

|`password`
|
|

|`username`
|
|Database user name
|===



HikariCP DataSource Property Reference - Other Properties
[cols=3*,options=header]
|===
|Property
|Default
|Description

|`allowPoolSuspension`
|`false`
|Controls whether the pool can be suspended and resumed through JMX

|`catalog`
|
|

|`connectionInitSql`
|
|

|`dataSourceClassName`
|
|

|`dataSourceJNDI`
|
|

|`dataSourceProperties`
|
|

|`driverClassName`
|
|

|`initializationFailTimeout`
|
|

|`isolateInternalQueries`
|
|

|`leakDetectionThreshold`
|
|

|`maxLifetime`
|
|

|`readOnly`
|
|

|`registerMbeans`
|
|

|`schema`
|
|

|`transactionIsolation`
|
|

|`validationTimeout`
|
|
|===

"hikari-instrumented" inherits from "hikari" and supports an additional set of properties:

HikariCP Instrumented Property Reference
[cols=3*,options=header]
|===
|Property
|Default
|Description

|`health.connection99Percent`
|
|

|`health.connectivity`
|
|
|===